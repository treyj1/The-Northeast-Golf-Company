<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Northeast Golf Company</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:wght@200;300;400&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #ffffff;
            --text-main: #1a1a1a;
            --text-gray: #777777;
            --nav-gray: #555555; 
            --address-gray: #888888;
            --akrobat-reg: 400;
            --akrobat-light: 300;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Barlow Semi Condensed', sans-serif;
            height: 2000vh; 
            overflow-x: hidden;
        }

        .fixed-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background-image: url('index/Topo_Whitinsville.jpg'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            z-index: 0;
            opacity: 0.2; 
        }

        .fixed-nav-container {
            position: fixed;
            bottom: 40px;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            pointer-events: none; /* Let clicks pass through empty areas */
        }

        .nav-links, .nav-address {
            pointer-events: auto; /* Re-enable clicks on links */
        }

        .nav-links {
            display: flex; gap: 40px; list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--nav-gray);
            font-size: 0.85rem;
            font-weight: var(--akrobat-light);
            letter-spacing: 0.2rem;
            text-transform: uppercase;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .nav-links a:hover { color: var(--text-main); }

        .nav-address {
            color: var(--address-gray);
            font-size: 0.75rem;
            letter-spacing: 0.15rem;
            text-transform: uppercase;
            font-weight: var(--akrobat-light);
        }

        .fixed-cross-nav {
            position: fixed;
            bottom: 15vh; 
            z-index: 2000; 
            opacity: 0;
            pointer-events: none;
            transition: color 0.3s ease, border-bottom-color 0.3s ease;
        }

        .bottom-right { right: 10%; }
        .bottom-left { left: 10%; }

        .viewport {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden;
            z-index: 1;
            transition: opacity 0.8s ease-in-out;
        }

        .horizontal-track {
            display: flex;
            width: 1300vw; 
            height: 100%;
            will-change: transform;
            transition: transform 0.85s cubic-bezier(0.19, 1, 0.22, 1);
        }

        section {
            width: 100vw;
            height: 100vh;
            flex-shrink: 0;
            position: relative;
            display: flex;
            align-items: center;
            overflow: visible; 
        }

        h1, h2 {
            font-weight: var(--akrobat-reg);
            text-transform: uppercase;
            line-height: 1;
            letter-spacing: 0.05rem;
        }

        .body-text {
            font-weight: var(--akrobat-light);
            color: var(--text-gray);
            font-size: 1.05rem;
            line-height: 1.5;
            margin-bottom: 1.2rem;
        }

        .lower-left-content {
            position: absolute;
            left: 10%;
            bottom: 22%;
            max-width: 580px;
            width: 80%;
            padding-right: 5%;
        }

        .what-we-do-container {
            position: absolute;
            left: 10%;
            bottom: 28%;
            width: 80%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 2;
        }
        
        .what-we-do-text {
            max-width: 580px;
            padding-right: 5%;
        }

        .service-links-right {
            display: flex;
            flex-direction: column;
            gap: 20px;
            text-align: right;
        }

        .gallery-image {
            width: 45vw;
            height: 55vh;
            object-fit: cover;
            position: absolute;
            left: 10%;
            top: 20%;
        }

        .peeking-img {
            width: 45vw;
            height: 55vh;
            object-fit: cover;
            position: absolute;
            left: 10%; 
            top: 20%;
            opacity: 0.3;
        }

        .project-text {
            position: absolute;
            left: 58%;
            top: 20%; 
            max-width: 450px;
            width: 35%; 
            padding-right: 5%;
            opacity: 0;
        }

        .more-link {
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-size: 0.8rem;
            color: var(--nav-gray);
            text-decoration: none;
            border-bottom: 1px solid var(--nav-gray);
            padding-bottom: 2px;
            transition: color 0.3s ease;
            width: fit-content;
            cursor: pointer;
        }

        .more-link:hover { 
            color: var(--text-main); 
            border-bottom-color: var(--text-main); 
        }

        .team-wrapper {
            display: flex;
            align-items: flex-start;
            gap: 80px;
            padding: 15vh 10% 0 10%;
            width: 100%;
            height: 100%;
        }

        .team-text-container {
            max-width: 550px;
            padding-right: 5%;
        }

        .portrait {
            width: 350px;
            height: 480px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .team-info h2 { font-size: 3.5rem; margin-bottom: 20px; }

        .projects-container, .contact-container {
            width: 100%;
            margin-left: 15%; 
            margin-top: -18vh; 
        }

        .project-list {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px 40px;
            list-style: none;
            padding-left: 35px;
        }

        .project-list a {
            text-decoration: none;
            color: var(--text-gray);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: color 0.3s ease;
        }

        .contact-form { display: flex; flex-direction: column; gap: 25px; margin-top: 35px; }

        .contact-form input, .contact-form textarea {
            background: transparent;
            border: none;
            border-bottom: 1px solid #cccccc;
            padding: 10px 0;
            font-family: inherit;
            outline: none;
            text-transform: uppercase;
            font-size: 0.85rem;
        }
        
        /* RESPONSIVE OVERHAUL 
           This handles the narrow screen layout logic 
        */
        @media (max-width: 900px) {
            
            /* 1. Hide the jump buttons (Cross Nav) to prevent overlap */
            .fixed-cross-nav { display: none !important; }

            /* 2. Adjust Team Layout */
            .team-wrapper { 
                flex-direction: column; 
                gap: 30px; 
                padding-top: 10vh; /* More space at top */
            }
            .portrait { 
                width: 100%; 
                max-width: 350px; 
                height: 35vh; /* Shorten image height */
            }
            .team-text-container {
                /* Make text scrollable if it gets too long */
                max-height: 35vh;
                overflow-y: auto;
                /* Fade mask at bottom */
                -webkit-mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
                mask-image: linear-gradient(to bottom, black 80%, transparent 100%);
                padding-bottom: 20px;
            }

            /* 3. Adjust "What We Do" */
            .what-we-do-container { 
                flex-direction: column; 
                align-items: flex-start; 
                gap: 20px; 
                top: 55%; /* Push down below image */
                bottom: auto;
            }
            .service-links-right { 
                text-align: left; 
                flex-direction: row; /* Horizontal links on mobile */
                flex-wrap: wrap;
            }

            /* 4. DESIGN & MANAGEMENT SECTIONS (The logic you requested) */
            .gallery-image, .peeking-img { 
                /* Move Image Up */
                top: 15%; 
                left: 10%;
                height: 35vh; /* Reduce height */
                width: 80vw; 
            }

            .project-text { 
                /* Move Text Below Image */
                left: 10%; 
                top: 55%; /* Starts below the 35vh image + margin */
                width: 80vw; 
                max-width: none; 
                
                /* Fix Height to stop before Nav Bar */
                height: 30vh; 
                
                /* Enable Internal Scrolling */
                overflow-y: auto;
                
                /* Add the "Bio Page" Fade Mask */
                -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
                mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
                
                /* Add padding so scrollbar isn't tight */
                padding-right: 15px; 
                padding-bottom: 20px;
            }
        }

    </style>
</head>
<body>

    <script>
        if (sessionStorage.getItem('scrollTarget')) {
            document.write('<style id="temp-hide">#main-viewport { opacity: 0 !important; }</style>');
        }
    </script>

    <div class="fixed-background"></div>

    <a id="link-to-mgmt" onclick="scrollToStage(5, true)" class="fixed-cross-nav bottom-right more-link">Golf Course Management &#8594;</a>
    <a id="link-to-design" onclick="scrollToStage(2, true)" class="fixed-cross-nav bottom-left more-link">&#8592; Golf Course Design</a>

    <div class="fixed-nav-container">
        <nav>
            <ul class="nav-links">
                <li><a onclick="scrollToStage(0, true)">Start</a></li>
                <li><a onclick="scrollToStage(1, true)">What We Do</a></li>
                <li><a onclick="scrollToStage(8, true)">Team</a></li>
                <li><a onclick="scrollToStage(11, true)">Projects</a></li>
                <li><a onclick="scrollToStage(12, true)">Contact</a></li>
            </ul>
        </nav>
        <div class="nav-address">THE NORTHEAST GOLF COMPANY, 118 SAUNDERSTOWN, RHODE ISLAND 02874</div>
    </div>

    <div class="viewport" id="main-viewport">
        <div class="horizontal-track" id="track">
            
            <section id="start">
                <div class="lower-left-content">
                    <h1 style="font-size: 5.5rem;">
                        <span style="display: block; white-space: nowrap;">THE NORTHEAST</span>
                        <span style="display: block; white-space: nowrap;">GOLF COMPANY</span>
                    </h1>
                    <p class="body-text" style="letter-spacing: 4px; font-size: 0.8rem; margin-top: 25px; padding-left: 30px;">SCROLL TO CONTINUE</p>
                </div>
            </section>

            <section id="what-we-do">
                <img src="index/Section.jpg" style="width: 100vw; height: 50vh; object-fit: cover; opacity: 0.7;" alt="Landscape Analysis">
                <div class="what-we-do-container">
                    <div class="what-we-do-text">
                        <h2 style="font-size: 4rem; margin-bottom: 20px;">WHAT WE DO</h2>
                        <p class="body-text">The Northeast Golf Company is a multi-disciplinary firm offering Comprehensive Golf Course Design and Operations Management services. From award-winning restorations to full-service agronomic programming and business analytics, we help clubs find the hidden value within their landscape while fostering unique "community cultures". Select a discipline to the right to learn more about our specific capabilities.</p>
                    </div>
                    <div class="service-links-right">
                        <a onclick="scrollToStage(2, true)" class="more-link">Golf Course Design</a>
                        <a onclick="scrollToStage(5, true)" class="more-link">Golf Course Management</a>
                    </div>
                </div>
            </section>

            <section id="design-intro">
                <div class="lower-left-content">
                    <h2 style="font-size: 5.5rem;">GOLF COURSE DESIGN</h2>
                    <p class="body-text" style="letter-spacing: 4px; font-size: 0.8rem; margin-top: 25px; padding-left: 30px;">SCROLL TO LEARN MORE</p>
                </div>
            </section>

            <section id="haverhill-1">
                <img src="index/Image_Haverhill_Render01.jpg" class="gallery-image" alt="Haverhill Render 1">
                <div class="project-text" id="text-1">
                    <h2>GOLF COURSE DESIGN</h2>
                    <p class="body-text">The Northeast Golf Company provides Comprehensive Golf Course Design Services for all types of golf course development, renovation and restoration projects. We enjoy working on exceptional properties, but have become quite adept at embracing the challenges of difficult sites. We believe the best work results from an inherent understanding of the land or course we are given and to find the sometimes hidden values within the landscape. We work closely with our clients. We listen and take goals and objectives seriously. Our experience and commitment to our craft and the collaborative nature of our design approach allows us to take on any type of project. There is no project too small or too large.</p>
                </div>
            </section>

            <section id="haverhill-2">
                <img src="index/Image_Haverhill_Render02.jpg" class="peeking-img" id="peek-img-design" alt="Haverhill Render 2">
                <div class="project-text" id="text-2">
                    <h2>OUR SERVICES INCLUDE</h2>
                    <p class="body-text">New Golf Course Design
Renovation of Existing Golf Courses
Restoration of Classic Designs
Comprehensive Golf Course Enhancement Planning
Golf Community Planning
Unique Golf Amenity Designs (short courses, putting courses, challenge courses)
Practice Facility Design
Clubhouse Circulation Planning</p>
                </div>
            </section>

            <section id="management-intro">
                <div class="lower-left-content">
                    <h2 style="font-size: 5.5rem;">GOLF COURSE MANAGEMENT</h2>
                    <p class="body-text" style="letter-spacing: 4px; font-size: 0.8rem; margin-top: 25px; padding-left: 30px;">SCROLL TO LEARN MORE</p>
                </div>
            </section>

            <section id="management-1">
                <img src="index/Image_Bristol_Clubhouse.jpg" class="gallery-image" alt="Bristol Clubhouse">
                <div class="project-text" id="text-3">
                    <h2 style="margin-bottom: 20px;">About Our Services</h2>
                    <p class="body-text">NGC Golf Operations Management provides full-service golf course operations management services to clubs, owners, municipalities and financial institutions. NGC is unique in many ways, most importantly in our collaborative approach to serving our partner clubs. We bring a seasoned team of thinkers to all aspects of golf operations including day to day management, staffing and training, agronomic care and food and beverage services.</p>
                    <p class="body-text">We specifically customize our approach to achieve measured success for our partners. Our management team brings over 50 years of combined experience and excellence to each relationship with the objective to provide the highest level of course conditioning and unmatched player experience. NGC brings the proper expertise to each property to guide the vision with unwavering work ethic, best practices, data driven decision making and out of the box marketing creativity to maximize property opportunities and profitability.</p>
                </div>
            </section>

            <section id="management-2">
                <img src="index/Index_Met_Links_01.jpg" class="peeking-img" id="peek-img-mgmt" alt="Met Links 1">
                <div class="project-text" id="text-4">
                    <p class="body-text">Robert McNeil, ASGCA, leader of the team at NGC brings over 30 years of broad reaching industry experience as a practicing golf course architect (member of the prestigious American Society of Golf Course Architects), course owner, maintenance manager and operations director. Understanding that it takes a great team to build a great company, NGC has created an incredible collaborative framework partnering with the best in the business to fit each client with the perfectly suited guiding consultants.</p>
                    <p class="body-text">Through Robert's award-winning design and construction experience, NGC can also help to accelerate golf course enhancements to reach desired quality goals and to provide for added revenue opportunities. NGC is committed to focused local staffing initiatives reaching "into the community" for those that will "serve the community". As golf is a game for allâ€¦we take great pride in creating "community cultures" at our clubs. We are keen that golf in many respects is local, and we enjoy embracing the local ethos to help define a club's personality.</p>
                </div>
            </section>

            <section id="team-intro">
                <div class="lower-left-content">
                    <h2 style="font-size: 5.5rem;">THE TEAM</h2>
                    <p class="body-text" style="letter-spacing: 4px; font-size: 0.8rem; margin-top: 25px; padding-left: 30px;">SCROLL TO CONTINUE</p>
                </div>
            </section>

            <section id="team-robert">
                <div class="team-wrapper">
                    <img src="index/Portrait_Robert.webp" alt="Robert McNeil" class="portrait">
                    <div class="team-text-container">
                        <h2>ROBERT MCNEIL</h2>
                        <p class="body-text">
                            My time is committed to your project. The work ethic and service commitment brought to each project is the foundation of our success. I have been finding, studying, designing, building and maintaining golf holes since I was a young boy.
                        </p>
                        <p class="body-text">
                            We embrace each relationship with energy, vision, and a listening ear. Our award-winning work at The Preserve at Boulder Hills, Mohegan Sun Golf Club, and Rockleigh Golf Course defines our fascination with variety, history, and strategic thought.
                        </p>
                        <p class="body-text">
                            Focus on detail is ensured through proven leadership. As your partner, we work diligently to ensure efficient collaboration, staying on-site continuously during construction to enhance the final product and maximize the project budget.
                        </p>
                        <p class="body-text">
                            The Northeast Golf Company is built on a passionate conviction to the craft of golf course architecture. It is our mission to integrate environmentally sound stewardship with exceptional service.
                        </p>
                        <a href="index/bio.html" class="more-link" style="margin-top: 15px;">More about Robert McNeil</a>
                    </div>
                </div>
            </section>

            <section id="team-trey">
                <div class="team-wrapper">
                    <img src="index/Portrait_Trey.webp" alt="Trey Jensen" class="portrait">
                    <div class="team-text-container">
                        <h2>TREY JENSEN</h2>
                        <p class="body-text">Originally from Las Vegas, Nevada, Trey has been with the Northeast Golf Company since 2021. He obtained his bachelor's degree from Brigham Young University in Utah, and is currently completing graduate work at Penn State in Landscape Architecture and Law School. With a deep understanding of golf course architecture and its history around the world, Trey is a valued asset at the Northeast Golf Company.</p>
                        <p class="body-text">Trey's diverse background adds much to our work at the Northeast Golf Company -- from historic project research, to 3D design work, to in-field construction and maintenance, Trey is able to adapt to any challenge he faces. Trey has previously worked as golf course maintenance staff in New England, as well as a turfgrass intern at the Prairie Club in the Sandhills of Nebraska. Trey was also a distinguished recipient of the 2023 Wadsworth Scholarship, presented by the ASGCA, which gave him the opportunity to attend the annual ASGCA meeting in Milwaukee, WI and learn from many of the greatest and most experienced golf course architects in the nation.</p>
                        <p class="body-text">Trey continues to learn each day and adapts to the project at hand by creating visualizations, presentations, planning and construction documents, and doing public engagement work.</p>
                    </div>
                </div>
            </section>

            <section id="projects-section">
                <div class="projects-container">
                    <h2 style="font-size: 4rem; margin-bottom: 5px; padding-left: 35px;">PROJECTS</h2>
                    <p style="font-size: 0.8rem; color: var(--address-gray); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 35px; padding-left: 65px;">Select to learn more</p>
                    <ul class="project-list">
                        <li><a href="Projects/Bass_Rocks/bass_rocks.html">Bass Rocks Golf Club</a></li>
                        <li><a href="unavailable.html">Bellevue Golf Club</a></li>
                        <li><a href="unavailable.html">Bergen County Golf Courses</a></li>
                        <li><a href="unavailable.html">Burlington Country Club</a></li>
                        <li><a href="unavailable.html">Fairmount Country Club</a></li>
                        <li><a href="unavailable.html">Fall River Country Club</a></li>
                        <li><a href="unavailable.html">Haverhill Country Club</a></li>
                        <li><a href="unavailable.html">Kernwood Country Club</a></li>
                        <li><a href="unavailable.html">Madison Golf Club</a></li>
                        <li><a href="unavailable.html">Mendham Golf & Tennis Club</a></li>
                        <li><a href="unavailable.html">Met Links</a></li>
                        <li><a href="unavailable.html">Milton Hoosic Club</a></li>
                    </ul>
                    <a href="unavailable.html" class="see-all-projects" style="margin-top: 45px; display: block; padding-left: 35px; text-transform: uppercase; letter-spacing: 3px; font-size: 0.9rem; color: var(--nav-gray); text-decoration: none;">See More Projects</a>
                </div>
            </section>

            <section id="contact">
                <div class="contact-container">
                    <h2 style="font-size: 4rem;">CONTACT US</h2>
                    <form class="contact-form">
                        <input type="text" placeholder="NAME" required>
                        <input type="email" placeholder="EMAIL" required>
                        <textarea placeholder="QUESTION" rows="4"></textarea>
                        <button type="submit" style="background: none; border: none; color: var(--nav-gray); font-family: inherit; font-size: 1rem; letter-spacing: 2px; text-transform: uppercase; cursor: pointer;">SUBMIT</button>
                    </form>
                </div>
            </section>

        </div>
    </div>

    <script>
        const track = document.getElementById('track');
        const viewport = document.getElementById('main-viewport');
        const peekImgDesign = document.getElementById('peek-img-design');
        const peekImgMgmt = document.getElementById('peek-img-mgmt');
        const linkToMgmt = document.getElementById('link-to-mgmt');
        const linkToDesign = document.getElementById('link-to-design');
        
        const textBlocks = [
            document.getElementById('text-1'),
            document.getElementById('text-2'),
            document.getElementById('text-3'),
            document.getElementById('text-4')
        ];
        const totalStages = 13; 

        if ('scrollRestoration' in history) history.scrollRestoration = 'manual';

        function getFade(current, start, end) {
            if (current < start) return 0;
            if (current > end) return 1;
            return (current - start) / (end - start);
        }

        window.addEventListener('scroll', () => {
            const scrollHeight = document.body.scrollHeight - window.innerHeight;
            const scrollPercent = window.pageYOffset / scrollHeight;
            const bucketSize = 1 / totalStages;
            const stageProgress = scrollPercent / bucketSize;
            
            let currentStage = Math.floor(stageProgress);
            let percentInBucket = (stageProgress % 1);
            let targetTranslate;
            
            if (percentInBucket < 0.25) {
                targetTranslate = currentStage * 100;
            } else if (percentInBucket > 0.75) {
                targetTranslate = (currentStage + 1) * 100;
            } else {
                let slideProgress = (percentInBucket - 0.25) / 0.5;
                targetTranslate = (currentStage * 100) + (slideProgress * 100);
            }

            targetTranslate = Math.min(targetTranslate, (totalStages - 1) * 100);
            track.style.transform = `translateX(-${targetTranslate}vw)`;

            // Fixed Button Fades
            let mgmtOp = 0;
            if (stageProgress > 1.4 && stageProgress < 2.0) mgmtOp = (stageProgress - 1.4) / 0.6;
            else if (stageProgress >= 2.0 && stageProgress <= 4.2) mgmtOp = 1;
            else if (stageProgress > 4.2 && stageProgress < 4.8) mgmtOp = 1 - (stageProgress - 4.2) / 0.6;
            linkToMgmt.style.opacity = mgmtOp;
            linkToMgmt.style.pointerEvents = mgmtOp > 0.1 ? 'auto' : 'none';

            let desOp = 0;
            if (stageProgress > 4.4 && stageProgress < 5.0) desOp = (stageProgress - 4.4) / 0.6;
            else if (stageProgress >= 5.0 && stageProgress <= 7.2) desOp = 1;
            else if (stageProgress > 7.2 && stageProgress < 7.8) desOp = 1 - (stageProgress - 7.2) / 0.6;
            linkToDesign.style.opacity = desOp;
            linkToDesign.style.pointerEvents = desOp > 0.1 ? 'auto' : 'none';

            // Project Text Fades
            textBlocks[0].style.opacity = stageProgress < 3.3 ? getFade(stageProgress, 2.4, 3.0) : 1 - getFade(stageProgress, 3.6, 4.2);
            textBlocks[1].style.opacity = stageProgress < 4.3 ? getFade(stageProgress, 3.4, 4.0) : 1 - getFade(stageProgress, 4.6, 5.2);
            textBlocks[2].style.opacity = stageProgress < 6.3 ? getFade(stageProgress, 5.4, 6.0) : 1 - getFade(stageProgress, 6.6, 7.2);
            textBlocks[3].style.opacity = stageProgress < 7.3 ? getFade(stageProgress, 6.4, 7.0) : 1 - getFade(stageProgress, 7.6, 8.2);
            
            // Image Opacity
            if (stageProgress > 2.6 && stageProgress < 4) peekImgDesign.style.opacity = 0.3 + ((stageProgress - 2.6) * 0.7);
            else if (stageProgress >= 4) peekImgDesign.style.opacity = 1;

            if (stageProgress > 5.6 && stageProgress < 7) peekImgMgmt.style.opacity = 0.3 + ((stageProgress - 5.6) * 0.7);
            else if (stageProgress >= 7) peekImgMgmt.style.opacity = 1;
        });

        function scrollToStage(index, useFade = false) {
            const scrollHeight = document.body.scrollHeight - window.innerHeight;
            const bucketSize = 1 / totalStages;
            const targetPos = index * bucketSize * scrollHeight;

            if (useFade) {
                viewport.style.opacity = 0;
                
                setTimeout(() => {
                    track.style.transition = 'none';
                    
                    window.scrollTo({
                        top: targetPos,
                        behavior: 'auto'
                    });
                    
                    const targetTranslate = index * 100;
                    track.style.transform = `translateX(-${targetTranslate}vw)`;
                    
                    setTimeout(() => {
                        viewport.style.opacity = 1;
                        setTimeout(() => {
                            track.style.transition = 'transform 0.85s cubic-bezier(0.19, 1, 0.22, 1)';
                        }, 800);
                    }, 50); 
                }, 800); 
            } else {
                window.scrollTo({
                    top: targetPos,
                    behavior: 'smooth'
                });
            }
        }
    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const targetId = sessionStorage.getItem('scrollTarget');
            
            if (targetId) {
                const tempStyle = document.getElementById('temp-hide');
                if(tempStyle) tempStyle.remove();

                const sections = Array.from(document.querySelectorAll('#track > section'));
                const index = sections.findIndex(sec => sec.id === targetId);
                
                if (index !== -1) {
                    const totalStages = 13; 
                    const scrollHeight = document.body.scrollHeight - window.innerHeight;
                    const bucketSize = 1 / totalStages;
                    const targetPos = index * bucketSize * scrollHeight;
                    const targetTranslate = index * 100;

                    const track = document.getElementById('track');
                    const viewport = document.getElementById('main-viewport');
                    
                    track.style.transition = 'none';
                    viewport.style.opacity = 0;

                    window.scrollTo({ top: targetPos, behavior: 'auto' });
                    track.style.transform = `translateX(-${targetTranslate}vw)`;

                    requestAnimationFrame(() => {
                        setTimeout(() => {
                            viewport.style.opacity = 1;
                            setTimeout(() => {
                                track.style.transition = 'transform 0.85s cubic-bezier(0.19, 1, 0.22, 1)';
                            }, 500);
                        }, 50);
                    });
                }
                sessionStorage.removeItem('scrollTarget');
            }
        });
    </script>

</body>

</html>
